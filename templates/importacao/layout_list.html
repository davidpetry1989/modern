{% extends "partials/base.html" %}
{% load static %}
{% block title %}Layouts de Importação{% endblock title %}
{% block content %}
<div class="main-content">
  <div class="page-content">
    <div class="container-fluid">

      {% block pagetitle %}
        {% include "partials/page-title.html" with pagetitle="Importações" title="Layouts de Importação" %}
      {% endblock pagetitle %}

      {% if messages %}
        {% for message in messages %}
          <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      {% endif %}

      <div class="card">
        <div class="card-body">

          <div class="row g-3 mb-3">
            <div class="col-md-6">
              <a href="{% url 'importacao:layout_add' %}" class="btn btn-success">
                <i class="ri-add-fill me-1"></i>Novo Layout
              </a>
            </div>
            <div class="col-md-6 text-end">
              <a href="{% url 'importacao:wizard' %}" class="btn btn-primary">
                <i class="ri-shuffle-line me-1"></i>Iniciar Importação
              </a>
            </div>
          </div>

          <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead class="table-light">
                <tr>
                  <th>Cód</th>
                  <th>Nome</th>
                  <th>Origem</th>
                  <th>Tipo</th>
                  <th>Ativo</th>
                  <th class="text-end">Ações</th>
                </tr>
              </thead>
              <tbody>
                {% for layout in layouts %}
                <tr>
                  <td>{{ layout.id }}</td>
                  <td>{{ layout.nome }}</td>
                  <td>{{ layout.origem_sistema }}</td>
                  <td>{{ layout.tipo_arquivo|upper }}</td>
                  <td>{{ layout.ativo|yesno:"Sim,Não" }}</td>
                  <td class="text-end">
                    <a href="{% url 'importacao:layout_edit' layout.pk %}" class="btn btn-sm btn-primary">
                      <i class="ri-pencil-line"></i>
                    </a>
                  </td>
                </tr>
                {% empty %}
                <tr><td colspan="5" class="text-center">Nenhum layout cadastrado</td></tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

          {% if is_paginated %}
          <nav aria-label="Page navigation" class="mt-3">
            <ul class="pagination justify-content-center">
              {% if page_obj.has_previous %}
                <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Anterior</a></li>
              {% else %}
                <li class="page-item disabled"><span class="page-link">Anterior</span></li>
              {% endif %}
              <li class="page-item disabled">
                <span class="page-link">Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>
              </li>
              {% if page_obj.has_next %}
                <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Próxima</a></li>
              {% else %}
                <li class="page-item disabled"><span class="page-link">Próxima</span></li>
              {% endif %}
            </ul>
          </nav>
          {% endif %}

        </div>
      </div>

    </div>
  </div>
</div>
{% endblock content %}
